{% load static %}
{% load humanize %}
<div id="katki-list" class="container twitter-container">
    <div class="card mb-3">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5>Beşdarî</h5>
                <select id="katki-tur-filter" class="form-control w-auto">
                    <option value="">Hemû</option>
                    <option value="sarki">Gotinên Stranê</option>
                    <option value="kisi">Kes</option>
                    <option value="sozluk">Ferheng</option>
                    <option value="atasozu">Gotinên Pêşiyan</option>
                    <option value="deyim">Îdîom</option>
                </select>
            </div>
            <div class="katki-container">
                {% for katki in katkilar %}
                    <div class="card mb-2 katki-card" id="katki-{{ katki.id }}">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start">
                                <p class="mb-1">
                                    <strong>{{ katki.user.profile.nickname }}</strong> 
                                    <span class="text-muted"><a href="{% url 'profile_detail' katki.user.profile.username %}" class="text-muted text-decoration-none">@{{ katki.user.profile.username }}</a> · <span class="badge bg-warning text-dark">⭐ {{ katki.user.profile.katki_puani }}</span> · <span class="time-since" data-date="{{ katki.eklenme_tarihi|date:'c' }}"></span></span>
                                </p>
                            </div>
                            <div class="katki-text">
                                {% if katki.tur == 'sarki' %}
                                    <p><i class="bi bi-music-note"></i> Vî bikarhênerî gotinên strana nû zêde kir: 
                                    {% if katki.sarki %}
                                        <a href="{% url 'sarki_detay_seo' katki.sarki.sarki_grubu.ad %}">{{ katki.sarki.sarki_grubu.ad }}</a>
                                    {% else %}
                                        <a href="{% url 'sarki_detay_seo' katki.sarki.sarki_grubu.ad %}">Stran #{{ katki.icerik_id }}</a>
                                    {% endif %}
                                    </p>
                                {% elif katki.tur == 'kisi' %}
                                    <p><i class="bi bi-person"></i> Vî bikarhênerî kesek nû zêde kir: 
                                    {% if katki.kisi %}
                                        <a href="{% url 'kisi_detay_seo' katki.kisi.ad %}">{{ katki.kisi.ad }}</a>
                                    {% else %}
                                        <a href="{% url 'kisi_detay_seo' katki.kisi.ad %}">Kes #{{ katki.icerik_id }}</a>
                                    {% endif %}
                                    </p>
                                {% elif katki.tur == 'sozluk' %}
                                    <p><i class="bi bi-book"></i> Vî bikarhênerî peyveke ferhengê nû zêde kir: 
                                    {% if katki.sozluk %}
                                        <a href="{% url 'sozluk_kelime_seo' katki.sozluk.kelime|url_safe %}">{{ katki.sozluk.kelime }}</a>
                                    {% else %}
                                        <a href="{% url 'sozluk_kelime_seo' katki.sozluk.kelime|url_safe %}">Peyv #{{ katki.icerik_id }}</a>
                                    {% endif %}
                                    </p>
                                {% elif katki.tur == 'atasozu' %}
                                    <p><i class="bi bi-quote"></i> Vî bikarhênerî gotineke pêşiyan nû zêde kir: 
                                    {% if katki.atasozu %}
                                        <a href="{% url 'atasozu_detay_seo' katki.atasozu.kelime %}">{{ katki.atasozu.kelime }}</a>
                                    {% else %}
                                        <a href="{% url 'atasozu_detay_seo' katki.atasozu.kelime %}">Gotina Pêşiyan #{{ katki.icerik_id }}</a>
                                    {% endif %}
                                    </p>
                                {% elif katki.tur == 'deyim' %}
                                    <p><i class="bi bi-quote"></i> Vî bikarhênerî îdîomeke nû zêde kir: 
                                    {% if katki.deyim %}
                                        <a href="{% url 'deyim_detay_seo' katki.deyim.kelime %}">{{ katki.deyim.kelime }}</a>
                                    {% else %}
                                        <a href="{% url 'deyim_detay_seo' katki.deyim.kelime %}">Îdîom #{{ katki.icerik_id }}</a>
                                    {% endif %}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <p class="text-muted p-3">Hêj beşdarî tune.</p>
                {% endfor %}
            </div>
            <div id="katki-loading" class="text-center mt-3" style="display: none;">Tê barkirin...</div>
            <button id="katki-load-more-btn" class="btn btn-primary mt-3" style="display: block;">Zêdetir Barkirin</button>
            <div id="katki-error-message" class="text-danger mt-3" style="display: none;"></div>
        </div>
    </div>
    <!-- Mobil için liderler listesi -->
    <div class="card mb-3 d-md-none">
        <div class="card-body">
            <button class="btn btn-link text-primary p-0 mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-liderler-list" aria-expanded="false" aria-controls="mobile-liderler-list">
                Yên Herî Zêde Beşdarî Kirine <i class="bi bi-chevron-down"></i>
            </button>
            <div class="collapse" id="mobile-liderler-list">
                {% include 'main/katki/katki_liderler.html' %}
            </div>
        </div>
    </div>
</div>